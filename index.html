<!DOCTYPE html>
<html>
    <body>
        <button id="linkButton">Link a bank account</button>
        <ul id="transactions"></ul>

        <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            var linkHandler = Plaid.create({
                env: 'sandbox',
                clientName: 'University of Virginia',
                key: '63b8f9256c19fe00130f7d05',
                product: ['transactions'],
                onLoad: function() {},
                onSuccess: function(public_token, metadata) {
                    $.post('/get_access_token', {public_token: public_token});
                },
                onExit: function(err, metadata) {}
            });

            document.getElementById('linkButton').onclick = function() {
            linkHandler.open();
            };

            $.get('http://127.0.0.1:5000/transactions', function(data) {
                data.transactions.forEach(function(transaction) {
                    $('#transactions').append('<li>' + transaction.name + ': $' + transaction.amount + '</li>');
                });
            });
</script>
</body>
</html>
